webpackJsonp([0],{0:function(e,t,n){"use strict";n(1),n(2),n(12),n(13),n(166),n(182),n(187),n(192),n(197),n(200),n(202)},1:function(e,t,n){e.exports=n.p+"index.html"},2:function(e,t,n){"use strict";n(3).module("insight",[n(5),n(7),n(8)]),e.exports="insight"},12:function(e,t,n){"use strict";angular.module(n(2)).config(["$urlRouterProvider","$locationProvider","$stateProvider",function(e,t,n){e.otherwise("/home")}])},13:function(e,t,n){"use strict";e.exports=n(14)},14:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){function r(e){t.debug("creating indexes...",e),c.createIndex({index:{fields:e}})}t.debug("loading PouchDB...");var o=n(15);t.debug("loading PouchDB-find..."),o.plugin(n(121)),t.debug("initializing insight db");var c=new o("insightDataStore");r(["type"]);var l=function(){function n(e){i(this,n),this._db=e}return a(n,[{key:"_get",value:function(t){return e.when(this._db.get(t))}},{key:"_find",value:function(t){return e.when(this._db.find({selector:t}))}},{key:"_getByType",value:function(e,t){return e?this._get(e).then(function(e){if(e.type!=t)throw new Error('Type is not "'+t+'"');return e}):this._find({type:t}).then(function(e){return e.docs})}},{key:"_findChildByType",value:function(e,t,n){var i={};return i.type=n,i[t]=e,this._find(i)}},{key:"_getStuff",value:function(e,t,n){return n?this._findChildByType(t,e,n):this._getByType(t,e)}},{key:"teams",value:function(e,t){return this._getStuff("team",e,t)}},{key:"games",value:function(e,t){return this._getStuff("game",e,t)}},{key:"events",value:function(e,t){return this._getStuff("event",e,t)}},{key:"players",value:function(e,t){return this._getStuff("player",e,t)}},{key:"_put",value:function(n){var i,r=this;return n._rev?i=e.when(this._db.put(n)):(t.debug("post",n),i=e.when(this._db.post(n))),t.debug("put",n),e.when(i.then(function(e){return r._db.get(e.id)}))}},{key:"createGame",value:function(e){var t=angular.extend({},e,{type:"game",create:new Date});return this._put(t)}},{key:"createTeam",value:function(e){return this._put({_id:e,type:"team",create:new Date})}},{key:"remove",value:function(n){return t.debug("remove",n),e.when(this._db.remove(n))}}]),n}();return new l(c)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();r.$inject=["$q","$log"],angular.module(n(2)).factory("DataStore",r),e.exports="DataStore"},166:function(e,t,n){"use strict";n(167),n(173),n(176),n(179)},167:function(e,t,n){"use strict";angular.module(n(2)).config(["$stateProvider",function(e){function t(e,t,n,i,r,a,o){this.DataStore=o,n.games=r||[],n.teams=a||[],this._mdDialog=i,this._scope=n,this._state=e}t.$inject=["$state","$rootScope","$scope","$mdDialog","games","teams","DataStore"],t.prototype.listTeams=function(){var e=this;return this.DataStore.teams().then(function(t){console.log("listTeam.then",t),e._scope.teams=t||[]})},t.prototype.listGames=function(){var e=this;return this.DataStore.games().then(function(t){e._scope.games=t||[]})},t.prototype.openGame=function(e){this._state.go("record",{id:e})},t.prototype.createGame=function(){var e=this;return this.DataStore.createGame().then(function(t){e._scope.games.push(t)})},t.prototype.createTeam=function(e){var t=this;return console.log("createTeam(",e,")"),this.DataStore.createTeam(e).then(function(e){t._scope.teams.push(e)}).then(function(){t._scope.newTeamName=void 0})},t.prototype.deleteGame=function(e,t){var n=this,i=this._mdDialog.confirm().clickOutsideToClose(!0).title("Suppression").textContent("Êtes-vous sûr de vouloir supprimer le match ?").targetEvent(e).ok("Oui").cancel("Non");this._mdDialog.show(i).then(function(){return n.DataStore.games(t)}).then(function(e){return n.DataStore.remove(e)}).then(function(){return n.listGames()})},t.prototype.deleteTeam=function(e,t){var n=this,i=this._mdDialog.confirm().clickOutsideToClose(!0).title("Suppression").textContent("Êtes-vous sûr de vouloir supprimer cette équipe ?").targetEvent(e).ok("Oui").cancel("Non");this._mdDialog.show(i).then(function(){return n.DataStore.teams(t)}).then(function(e){return n.DataStore.remove(e)}).then(function(){return n.listTeams()})},e.state("home",{url:"/home",template:n(168),controller:t,controllerAs:"ctrl",resolve:{games:["DataStore",function(e){return e.games()}],teams:["DataStore",function(e){return e.teams()}]}})}]),n(169)},168:function(e,t){e.exports='<md-toolbar><div class=md-toolbar-tools><a ui-sref=home><i class=material-icons>assessment</i> Ulti Insight</a> <span flex></span><md-button ng-click=ctrl.createGame()>Record a new game</md-button></div></md-toolbar><h1 flex class="md-display-4 center">Ulti<md-icon style=font-size:48px>assessment</md-icon>Insight</h1><md-content layout=row layout-padding layout-margin><div flex class=md-whiteframe-4dp><div layout=row layout-align="space-between center"><h3 class=md-headline>Games</h3><md-button class="md-fab md-button md-primary md-ink-ripple" ng-click=ctrl.createGame()><md-icon>add</md-icon></md-button></div><div ng-if="!games || games.length < 1">No games</div><md-list ng-if="games && games.length > 0" role=gamesList><md-list-item ng-repeat="game in games | orderBy:\'-create\'" ng-click=ctrl.openGame(game._id) class="md-3-line md-no-proxy"><md-icon class=md-avatar>face</md-icon><div class=md-list-item-text><h3>{{ game.team1 || \'Unnamed Team\' }} vs {{ game.team2 || \'Unnamed Team\' }}</h3><h4>{{ game.create | date:\'medium\'}}</h4><p>{{ game._id }}</p></div><md-button aria-label=delete class="md-secondary md-warn md-raised" ng-click="ctrl.deleteGame($event, game._id)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></div><div flex class=md-whiteframe-4dp></div></md-content>'},169:function(e,t,n){var i=n(170);"string"==typeof i&&(i=[[e.id,i,""]]);n(172)(i,{});i.locals&&(e.exports=i.locals)},170:function(e,t,n){t=e.exports=n(171)(),t.push([e.id,".center{text-align:center}",""])},173:function(e,t,n){"use strict";angular.module(n(2)).config(["$stateProvider",function(e){e.state("record",{url:"/record/:id",template:n(174),controller:n(175),controllerAs:"ctrl",resolve:{game:["$stateParams","DataStore",function(e,t){return t.games(e.id)}],teams:["DataStore",function(e){return e.teams()}]}})}])},174:function(e,t){e.exports="<md-toolbar><div class=md-toolbar-tools><a ui-sref=home>Ulti <i class=material-icons>assessment</i> Insight</a> <span flex></span><md-button ng-disabled=true>Do stuff</md-button></div></md-toolbar><div layout=row layout-padding><section flex=60 layout-align=\"center center\"><in-video-file time-update=updateTime time=time flex=75></in-video-file><h1>Time : {{time | number:2}}</h1></section><section flex><div layout=column layout-padding><div layout=row layout-margin layout-align=\"space-around center\"><md-input-container flex><label>Team 1</label><input ng-model=ctrl.game.team1 ng-model-options=\"{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }\" ng-change=ctrl.updateGame()></md-input-container><div>VS</div><md-input-container flex><label>Team 2</label><input class=md-accent ng-model=ctrl.game.team2 ng-model-options=\"{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }\" ng-change=ctrl.updateGame()></md-input-container></div><div ui-view layout=row layout-align=\"center center\" layout-padding><md-button class=\"md-raised md-primary\" ui-sref=.selectTeam>Start recording</md-button></div></div></section></div>"},175:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i,r,a){"ngInject";n(this,e),this.DataStore=a,this.game=i,t.updateTime=function(e){t.time=e,t.$digest()}}return e.$inject=["$scope","game","teams","DataStore"],i(e,[{key:"updateGame",value:function(){var e=this;return this.DataStore._put(this.game).then(function(t){e.game=t})}}]),e}();e.exports=r},176:function(e,t,n){"use strict";angular.module(n(2)).config(["$stateProvider",function(e){e.state("record.selectTeam",{template:n(177),controller:n(178),controllerAs:"ctrl"})}])},177:function(e,t){e.exports="<div flex class=md-whiteframe-1dp><p class=md-title>Pulling Team ?</p><md-button class=md-raised ng-click=ctrl.selectTeam(this.ctrl.game.team1)>{{this.ctrl.game.team1 || 'Team 1'}}</md-button><md-button class=md-raised ng-click=ctrl.selectTeam(this.ctrl.game.team2)>{{this.ctrl.game.team2 || 'Team 2'}}</md-button></div>"},178:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i){"ngInject";n(this,e),this.game=t,this._state=i}return e.$inject=["game","$state"],i(e,[{key:"selectTeam",value:function(e){console.log("select team",e),this._state.go("^.selectPlayers")}}]),e}();e.exports=r},179:function(e,t,n){"use strict";angular.module(n(2)).config(["$stateProvider",function(e){e.state("record.selectPlayers",{template:n(180),controller:n(181),controllerAs:"ctrl"})}])},180:function(e,t){e.exports="<div flex class=md-whiteframe-1dp><p class=md-title>Select players</p></div>"},181:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){"ngInject";n(this,e),this.game=t}return e.$inject=["game"],i(e,[{key:"selectTeam",value:function(e){console.log("select team",e)}}]),e}();e.exports=r},182:function(e,t,n){"use strict";n(183),e.exports=n(185)},183:function(e,t,n){var i=n(184);"string"==typeof i&&(i=[[e.id,i,""]]);n(172)(i,{});i.locals&&(e.exports=i.locals)},184:function(e,t,n){t=e.exports=n(171)(),t.push([e.id,".inVideoFile{position:relative;background-color:#9e9e9e;border:2px dashed #000;min-height:180px;min-width:320px}.inVideoFile.videoPlayer{background-color:#000;border:none}.inVideoFile>video{width:100%}",""])},185:function(e,t,n){"use strict";angular.module(n(2)).directive("inVideoFile",["$log",function(e){function t(t,n){"ngInject";var i=this;if(this._scope=t,this._element=n,this.videoSelected=!1,this._input=this._element.find("input"),this._video=this._element.find("video"),!this._input[0])throw new Error("Unable to find _input element from template");if(!this._video[0])throw new Error("Unable to find _video element from template");this._video.on("timeupdate",function(e){i._timeUpdate(e)}),this._input.on("change",function(){if(!i._input[0].files[0])return console.log(i._input),e.warn("no file");var t=i._input[0].files[0];try{i._video[0].src=URL.createObjectURL(t),i.videoSelected=!0,i._scope.$digest()}catch(n){e.error("can't get file",n)}})}return t.$inject=["$scope","$element"],t.prototype._timeUpdate=function(e){angular.isFunction(this._scope.timeUpdate)&&this._scope.timeUpdate(e.target.currentTime)},t.prototype.play=function(){this._video[0].play()},t.prototype.pause=function(){this._video[0].pause()},{scope:{timeUpdate:"="},template:n(186),replace:!1,controller:t,controllerAs:"ctrl"}}]),e.exports="in-_video-html"},186:function(e,t){e.exports='<div class=inVideoFile layout=row layout-align="center center" ng-class="{videoPlayer: videoSelected}"><input type=file ng-hide=ctrl.videoSelected><video ng-show=ctrl.videoSelected controls autoplay></video></div><div><md-button ng-click=ctrl.play() ng-disabled=!ctrl.videoSelected>Play</md-button><md-button ng-click=ctrl.pause() ng-disabled=!ctrl.videoSelected>Pause</md-button></div>'},187:function(e,t,n){"use strict";n(188),e.exports=n(190)},188:function(e,t,n){var i=n(189);"string"==typeof i&&(i=[[e.id,i,""]]);n(172)(i,{});i.locals&&(e.exports=i.locals)},189:function(e,t,n){t=e.exports=n(171)(),t.push([e.id,"",""])},190:function(e,t,n){"use strict";function i(e,t){"ngInject";t.bind("click",function(){})}i.$inject=["$scope","$element"],angular.module(n(2)).directive("inPlayer",["$log",function(e){return{scope:{name:"@"},transclude:!0,template:n(191),replace:!0,controller:i,controllerAs:"inPlayerController"}}]),e.exports="in-player-html"},191:function(e,t){e.exports="<div><md-button class=md-fab><ng-transclude></ng-transclude></md-button></div>"},192:function(e,t,n){"use strict";n(193),e.exports=n(195)},193:function(e,t,n){var i=n(194);"string"==typeof i&&(i=[[e.id,i,""]]);n(172)(i,{});i.locals&&(e.exports=i.locals)},194:189,195:function(e,t,n){"use strict";function i(e,t){"ngInject";function n(e){var t,n=e?l.states.filter(c(e)):l.states;return l.simulateQuery?(t=$q.defer(),$timeout(function(){t.resolve(n)},1e3*Math.random(),!1),t.promise):n}function i(e){}function r(e){}function a(){var e="Mr Friz 1, Mr Friz 2, Fresh Fever, Frisbeurs";return e.split(/, +/g).map(function(e){return{value:e.toLowerCase(),display:e}})}function o(){console.log("new team")}function c(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}var l=this;l.simulateQuery=!1,l.isDisabled=!1,l.states=a(),l.querySearch=n,l.selectedItemChange=r,l.searchTextChange=i,l.newTeam=o,e.ctrl=l,t.bind("click",function(){})}i.$inject=["$scope","$element"],angular.module(n(2)).directive("inTeam",["$log",function(e){return{scope:{name:"@"},transclude:!0,template:n(196),replace:!0,controller:i,controllerAs:"inTeamController"}}]),e.exports="in-team-html"},196:function(e,t){e.exports='<div><div ng-if=team><div><div layout=row><in-player>+</in-player><in-player>+</in-player><in-player>+</in-player></div><div layout=row><in-player>+</in-player><in-player>+</in-player><in-player>+</in-player></div><div layout=row><in-player>+</in-player><in-player>+</in-player><in-player>+</in-player></div></div></div><div ng-if=!team><form ng-submit=$event.preventDefault()><md-autocomplete ng-disabled=ctrl.isDisabled md-no-cache=ctrl.noCache md-selected-item=ctrl.selectedItem md-search-text-change=ctrl.searchTextChange(ctrl.searchText) md-search-text=ctrl.searchText md-selected-item-change=ctrl.selectedItemChange(item) md-items="item in ctrl.querySearch(ctrl.searchText)" md-item-text=item.display md-min-length=0 placeholder="Who\'s this team?"><md-item-template><span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.display}}</span></md-item-template><md-not-found>No team "{{ctrl.searchText}}" found. <a ng-click=ctrl.newTeam(ctrl.searchText)>Create a new one!</a></md-not-found></md-autocomplete></form></div></div>'},197:function(e,t,n){"use strict";e.exports=n(198)},198:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();angular.module(n(2)).directive("inSelect",["DataStore","$log",function(e,t){var a=function(){function e(t){i(this,e),this._scope=t,t.dataset=t.dataset||[]}return e.$inject=["$scope"],r(e,[{key:"searchTextChange",value:function(e){t.info("Text changed to "+e)}},{key:"createFilterFor",value:function(e){return function(t){return console.log("FilterFor",e,t,0===t.indexOf(e)),0===t.indexOf(e)}}},{key:"querySearch",value:function(e){return e?this._scope.dataset.filter(this.createFilterFor(e)):this._scope.dataset}}]),e}();return{scope:{placeholder:"@",dataset:"=",item:"=",createNew:"&",itemChanged:"&"},template:n(199),controller:a,controllerAs:"ctrl"}}]),e.exports="in-select"},199:function(e,t){e.exports='<md-autocomplete md-selected-item=item md-search-text-change=ctrl.searchTextChange md-search-text=ctrl.searchText md-selected-item-change=itemChanged() md-items="item in ctrl.querySearch(ctrl.searchText)" md-item-text=item._id placeholder={{placeholder}}><md-item-template><span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item._id}}</span></md-item-template><md-not-found>No team "{{ctrl.searchText}}" found. <a ng-click=createNew(ctrl.searchText)>Create a new one!</a></md-not-found></md-autocomplete>'},202:function(e,t,n){var i=n(203);"string"==typeof i&&(i=[[e.id,i,""]]);n(172)(i,{});i.locals&&(e.exports=i.locals)},203:function(e,t,n){t=e.exports=n(171)(),t.push([e.id,"",""])}});